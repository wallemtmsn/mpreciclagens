<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MP Reciclagem â€¢ Compras de Materiais</title>
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <!-- HEADER -->
  <header class="app-header">
    <div class="brand">
      <div class="logo">MP</div>
      <div class="brand-text">
        <h1>MP Reciclagem</h1>
        <p>Controle de compras por atendimento</p>
      </div>
    </div>
  </header>

  <!-- CONTEÃšDO -->
  <main class="container">

    <!-- CONTROLE DA COMPRA -->
    <section class="card">
      <div class="card-title">
        <h2>Compra / Atendimento</h2>
      </div>

      <div class="actions">
        <button
          id="btnNovaCompra"
          class="btn btn-primary"
          style="flex:1"
          onclick="novaCompra()"
        >
          âž• Nova Compra
        </button>

        <button
          id="btnFinalizarCompra"
          class="btn btn-secondary"
          style="flex:1"
          onclick="finalizarCompra()"
        >
          âœ” Finalizar Compra
        </button>
      </div>

      <small class="hint" style="margin-top:8px; display:block;">
        Cada pessoa que vende material deve ter uma nova compra.
      </small>
    </section>

    <!-- NOVO ITEM -->
    <section class="card">
      <div class="card-title">
        <h2>Novo item</h2>
        <button id="btnOpenPrices" class="btn btn-ghost" type="button">
          Editar preÃ§os
        </button>
      </div>

      <form id="formItem" class="form">
        <label class="field">
          <span>Material</span>
          <select id="materialSelect" required></select>
        </label>

        <label class="field">
          <span>Peso (kg)</span>
          <input
            id="pesoInput"
            type="number"
            inputmode="decimal"
            step="0.001"
            min="0"
            placeholder="Ex.: 1,300"
            required
          />
          <small class="hint">
            Use o valor da balanÃ§a.<br>
            <b>1,300</b> = 1 kg e 300 g â€¢ <b>0,250</b> = 250 g
          </small>
        </label>

        <div class="grid-2">
          <div class="metric">
            <span class="metric-label">PreÃ§o por kg</span>
            <strong id="precoKg" class="metric-value">R$ 0,00</strong>
          </div>

          <div class="metric">
            <span class="metric-label">Total do item</span>
            <strong id="totalItem" class="metric-value">R$ 0,00</strong>
          </div>
        </div>

        <div class="actions">
          <button class="btn btn-primary" type="submit">
            Adicionar item
          </button>
          <button id="btnClearInputs" class="btn btn-secondary" type="button">
            Limpar
          </button>
        </div>
      </form>
    </section>

    <!-- ITENS DA COMPRA ATIVA -->
    <section class="card">
      <div class="card-title">
        <h2>Itens da compra ativa</h2>
        <button id="btnClearAll" class="btn btn-ghost" type="button">
          Cancelar compra
        </button>
      </div>

      <ul id="itensList" class="list" aria-live="polite"></ul>

      <div class="total-box">
        <span>Total (dia + compra ativa)</span>
        <strong id="totalGeral">R$ 0,00</strong>
      </div>
    </section>

    <!-- FECHAMENTO DO DIA -->
    <section class="card">
      <div class="card-title">
        <h2>Fechamento do dia</h2>
      </div>

      <div class="actions">
        <button
          class="btn btn-primary"
          style="width:100%;"
          onclick="fecharDiaWhatsApp()"
        >
          ðŸ“¤ Fechar dia e enviar WhatsApp
        </button>
      </div>
    </section>

    <!-- MODAL DE PREÃ‡OS -->
    <dialog id="pricesDialog" class="dialog">
      <form method="dialog" class="dialog-content">
        <div class="dialog-title">
          <h3>Editar preÃ§os (R$/kg)</h3>
          <button class="btn btn-ghost" value="cancel" aria-label="Fechar">
            âœ•
          </button>
        </div>

        <div id="pricesForm" class="prices-form"></div>

        <div class="dialog-actions">
          <button
            id="btnResetPrices"
            class="btn btn-secondary"
            type="button"
          >
            Restaurar padrÃ£o
          </button>
          <button
            id="btnSavePrices"
            class="btn btn-primary"
            type="button"
          >
            Salvar
          </button>
        </div>
      </form>
    </dialog>

  </main>

  <!-- FOOTER -->
  <footer class="footer">
    <small>MP Reciclagem â€¢ Uso interno</small>
  </footer>

  <!-- SCRIPT -->
  <script src="app.js"></script>
</body>
</html>

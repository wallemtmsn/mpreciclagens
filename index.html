<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MP Reciclagem ‚Ä¢ Compras de Materiais</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚ôªÔ∏è</text></svg>">
</head>

<body>
  <!-- HEADER -->
  <header class="app-header">
    <div class="brand">
      <div class="logo" aria-hidden="true">MP</div>
      <div class="brand-text">
        <h1>MP Reciclagem</h1>
        <p>Controle de compras por atendimento</p>
      </div>
    </div>
  </header>

  <!-- CONTE√öDO -->
  <main class="container">

    <!-- CONTROLE DA COMPRA -->
    <section class="card" aria-labelledby="compra-title">
      <div class="card-title">
        <h2 id="compra-title">Compra / Atendimento</h2>
      </div>

      <div class="actions">
        <button
          id="btnNovaCompra"
          class="btn btn-primary"
          style="flex:1"
          type="button"
          aria-label="Iniciar nova compra"
        >
          ‚ûï Nova Compra
        </button>

        <button
          id="btnFinalizarCompra"
          class="btn btn-secondary"
          style="flex:1"
          type="button"
          aria-label="Finalizar compra atual"
        >
          ‚úî Finalizar Compra
        </button>
      </div>

      <small class="hint" style="margin-top:8px; display:block;">
        Cada pessoa que vende material deve ter uma nova compra.
      </small>
    </section>

    <!-- NOVO ITEM -->
    <section class="card" aria-labelledby="novo-item-title">
      <div class="card-title">
        <h2 id="novo-item-title">Novo item</h2>
        <button id="btnOpenPrices" class="btn btn-ghost" type="button" aria-label="Abrir configura√ß√£o de pre√ßos">
          Editar pre√ßos
        </button>
      </div>

      <form id="formItem" class="form">
        <label class="field">
          <span>Material</span>
          <select id="materialSelect" required aria-label="Selecione o tipo de material">
            <!-- Op√ß√µes ser√£o geradas pelo JavaScript -->
          </select>
        </label>

        <label class="field">
          <span>Peso (kg)</span>
          <input
            id="pesoInput"
            type="number"
            inputmode="decimal"
            step="0.001"
            min="0"
            placeholder="Ex.: 1,300"
            required
            aria-describedby="peso-hint"
          />
          <small id="peso-hint" class="hint">
            Use o valor da balan√ßa.<br>
            <b>1,300</b> = 1 kg e 300 g ‚Ä¢ <b>0,250</b> = 250 g
          </small>
        </label>

        <div class="grid-2">
          <div class="metric" aria-live="polite">
            <span class="metric-label">Pre√ßo por kg</span>
            <strong id="precoKg" class="metric-value">R$ 0,00</strong>
          </div>

          <div class="metric" aria-live="polite">
            <span class="metric-label">Total do item</span>
            <strong id="totalItem" class="metric-value">R$ 0,00</strong>
          </div>
        </div>

        <div class="actions">
          <button class="btn btn-primary" type="submit" id="btnAddItem" aria-label="Adicionar item √† compra">
            Adicionar item
          </button>
          <button id="btnClearInputs" class="btn btn-secondary" type="button" aria-label="Limpar campos de entrada">
            Limpar
          </button>
        </div>
      </form>
    </section>

    <!-- ITENS DA COMPRA ATIVA -->
    <section class="card" aria-labelledby="itens-title">
      <div class="card-title">
        <h2 id="itens-title">Itens da compra ativa</h2>
        <button id="btnClearAll" class="btn btn-ghost" type="button" aria-label="Cancelar compra atual">
          Cancelar compra
        </button>
      </div>

      <ul id="itensList" class="list" aria-live="polite" aria-label="Lista de itens da compra"></ul>

      <div class="total-box" aria-live="polite">
        <span>Total (dia + compra ativa)</span>
        <strong id="totalGeral">R$ 0,00</strong>
      </div>
    </section>

    <!-- FECHAMENTO DO DIA -->
    <section class="card" aria-labelledby="fechamento-title">
      <div class="card-title">
        <h2 id="fechamento-title">Fechamento do dia</h2>
      </div>

      <div class="actions">
        <button
          id="btnFecharDia"
          class="btn btn-primary"
          style="width:100%;"
          type="button"
          aria-label="Fechar dia e enviar relat√≥rio por WhatsApp"
        >
          üì§ Fechar dia e enviar WhatsApp
        </button>
      </div>
    </section>

    <!-- MODAL DE PRE√áOS -->
    <dialog id="pricesDialog" class="dialog" aria-labelledby="dialog-title">
      <form method="dialog" class="dialog-content">
        <div class="dialog-title">
          <h3 id="dialog-title">Editar pre√ßos (R$/kg)</h3>
          <button class="btn btn-ghost" value="cancel" aria-label="Fechar modal de pre√ßos" autofocus>
            ‚úï
          </button>
        </div>

        <div id="pricesForm" class="prices-form" role="form" aria-label="Formul√°rio de edi√ß√£o de pre√ßos"></div>

        <div class="dialog-actions">
          <button
            id="btnResetPrices"
            class="btn btn-secondary"
            type="button"
            aria-label="Restaurar pre√ßos padr√£o"
          >
            Restaurar padr√£o
          </button>
          <button
            id="btnSavePrices"
            class="btn btn-primary"
            type="button"
            aria-label="Salvar altera√ß√µes nos pre√ßos"
          >
            Salvar
          </button>
        </div>
      </form>
    </dialog>

  </main>

  <!-- FOOTER -->
  <footer class="footer">
    <small>MP Reciclagem ‚Ä¢ Uso interno ‚Ä¢ ‚ôªÔ∏è</small>
  </footer>

  <!-- SCRIPT -->
  <script src="app.js"></script>
</body>
</html>